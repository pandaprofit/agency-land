'use client'

import { FC, useRef } from 'react'
import classNames from 'classnames'
import { gsap } from 'gsap'
import { useGSAP } from '@gsap/react';

gsap.registerPlugin(useGSAP);
import styles from './introduce.module.scss'
import { IntroduceProps } from './introduce.types'

const Introduce: FC<IntroduceProps> = ({
  className
}) => {
  const rootClassName = classNames(styles.root, className)
  const containerRef = useRef<HTMLDivElement>(null)
  const pathRefs = useRef<(SVGPathElement | null)[]>([])
  const overlayRefs = useRef<(SVGPathElement | null)[]>([])

  useGSAP(() => {
    const ctx = gsap.context(() => {
      // Инициализируем все элементы
      pathRefs.current.forEach(path => {
        if (path) {
          gsap.set(path, {
            opacity: 0,
            scale: 0.8
          })
        }
      })

      overlayRefs.current.forEach(path => {
        if (path) {
          gsap.set(path, {
            opacity: 0,
            scale: 0.8
          })
        }
      })

      const tl = gsap.timeline()

      tl.to(pathRefs.current, {
        opacity: 1,
        scale: 1,
        duration: 0.8,
        stagger: 0.1,
        ease: "power3.out"
      })
        .to(overlayRefs.current, {
          opacity: 0.5,
          scale: 1,
          duration: 0.4,
          stagger: 0.05,
          ease: "power2.out"
        }, "-=0.5")

    }, containerRef)

    return () => ctx.revert()
  }, [])

  const setPathRef = (index: number) => (el: SVGPathElement | null) => {
    if (el) pathRefs.current[index] = el
  }

  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  const setOverlayRef = (index: number) => (el: SVGPathElement | null) => {
    if (el) overlayRefs.current[index] = el
  }

  return (
    <div className={rootClassName} ref={containerRef}>
      <svg width="1049" height="467" viewBox="0 0 1049 467" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path ref={setPathRef(6)} d="M1013.93 76.1983C1011.91 71.9229 1008.26 68.5027 1002.96 65.9375C997.671 62.9447 990.838 61.4483 982.465 61.4483H978.423C972.072 61.4483 965.48 62.731 958.647 65.2962C951.91 67.8614 947.002 72.1367 943.923 78.1222C940.843 84.1076 938.87 92.2308 938.004 102.492C937.138 112.752 936.705 125.151 936.705 139.687C936.705 165.766 938.293 183.509 941.469 192.915C944.741 202.321 949.456 207.023 955.615 207.023L966.153 208.306L988.817 207.665C992.763 207.665 996.275 207.878 999.355 208.306C1002.43 208.734 1007.05 210.444 1013.21 213.436C1019.47 216.429 1024.47 226.262 1028.23 242.936C1032.08 259.182 1034 287.186 1034 326.947C1034 353.026 1033.09 374.83 1031.26 392.359C1029.43 409.46 1026.3 422.5 1021.87 431.478C1017.54 440.029 1012.25 445.587 1006 448.152C999.836 450.717 993.099 452 985.786 452H978.135C970.917 452 965.48 451.572 961.823 450.717C958.262 450.29 952.728 447.938 945.222 443.663C937.812 439.388 932.519 428.272 929.343 410.316C926.167 391.932 924.579 360.08 924.579 314.762H936.272V323.74C936.272 345.544 936.705 361.79 937.571 372.479C938.533 382.74 940.891 390.435 944.644 395.566C948.494 400.268 953.594 403.475 959.946 405.185C966.298 406.468 972.553 407.109 978.712 407.109C988.721 407.109 997.141 405.185 1003.97 401.337C1010.9 397.49 1015.62 390.221 1018.12 379.533C1020.62 368.845 1021.87 351.316 1021.87 326.947C1021.87 296.164 1020.24 276.711 1016.97 268.588C1013.79 260.038 1008.35 255.762 1000.65 255.762L978.568 254.48L952.728 251.273C943.682 251.273 936.705 243.578 931.797 228.186C926.889 212.795 924.435 186.716 924.435 149.948C924.435 120.875 925.493 96.7198 927.61 77.4809C929.728 57.8143 933.289 43.9195 938.293 35.7964C943.393 27.2457 949.36 21.9015 956.193 19.7639C963.026 17.1987 970.676 15.9161 979.145 15.9161C986.171 15.9161 991.223 16.3436 994.302 17.1987C997.478 17.6262 1002.58 19.5501 1009.6 22.9704C1016.73 25.9631 1022.16 36.6514 1025.92 55.0354C1029.67 73.4193 1031.55 101.423 1031.55 139.046H1019.85C1019.85 119.807 1019.32 105.484 1018.27 96.0786C1017.3 86.6728 1015.86 80.0461 1013.93 76.1983Z" fill="#BBAA92" />
        <path ref={setPathRef(7)} d="M833.058 19.8601H852.979L782.245 226.359L857.743 447.607H836.667L769.831 247.522H752.797V447.607H741.104V19.8601H752.797V204.555H769.831L833.058 19.8601Z" fill="#BBAA92" />
        <path ref={setPathRef(8)} d="M648.573 148.152C648.573 186.63 647.274 213.137 644.675 227.673C642.173 241.782 636.64 251.615 628.075 257.173C634.522 261.021 639.238 268.075 642.221 278.336C645.301 288.169 646.841 306.339 646.841 332.847V448.922H635.292V354.009C635.292 322.372 633.753 301.423 630.673 291.162C627.69 280.901 622.445 275.771 614.938 275.771H549.257V448.922H537.564V21.1748H615.949C627.593 21.1748 635.918 29.9392 640.922 47.4681C646.023 64.5694 648.573 98.1308 648.573 148.152ZM636.447 144.946C636.447 111.598 634.667 90.0077 631.106 80.1744C627.545 69.9136 621.675 64.7832 613.495 64.7832H549.257V232.804H613.783C622.252 232.804 628.123 227.032 631.395 215.489C634.763 203.518 636.447 180.003 636.447 144.946Z" fill="#bbaa92" />
        <path ref={setPathRef(9)} d="M373.721 448.868H360.008L416.884 21.1214H432.474L489.783 448.868H476.358L463.799 352.673H385.992L373.721 448.868ZM385.992 334.069H463.799L424.679 10L385.992 334.069Z" fill="#bbaa92" />
        <path ref={setPathRef(10)} d="M202.806 448.868H191.113V21.1214H202.806V206.457H292.594V21.1214H304.143V448.868H292.594V249.424H202.806V448.868Z" fill="#bbaa92" />
        <path ref={setPathRef(11)} d="M104.5 76.1983C102.479 71.9229 98.822 68.5027 93.529 65.9375C88.236 62.9447 81.4032 61.4483 73.0306 61.4483H68.9887C62.6371 61.4483 56.0449 62.731 49.2121 65.2962C42.4755 67.8614 37.5675 72.1367 34.4879 78.1222C31.4083 84.1076 29.4355 92.2308 28.5693 102.492C27.7032 112.752 27.2702 125.151 27.2702 139.687C27.2702 165.766 28.8581 183.509 32.0339 192.915C35.3059 202.321 40.0215 207.023 46.1806 207.023L56.7185 208.306L79.3822 207.665C83.3279 207.665 86.8405 207.878 89.9201 208.306C92.9997 208.734 97.619 210.444 103.778 213.436C110.034 216.429 115.038 226.262 118.791 242.936C122.641 259.182 124.565 287.186 124.565 326.947C124.565 353.026 123.651 374.83 121.823 392.359C119.994 409.46 116.866 422.5 112.439 431.478C108.109 440.029 102.816 445.587 96.5604 448.152C90.4013 450.717 83.6647 452 76.3508 452H68.7C61.4822 452 56.0449 451.572 52.3879 450.717C48.8271 450.29 43.2935 447.938 35.7871 443.663C28.3769 439.388 23.0839 428.272 19.9081 410.316C16.7323 391.932 15.1444 360.08 15.1444 314.762H26.8371V323.74C26.8371 345.544 27.2702 361.79 28.1363 372.479C29.0986 382.74 31.4564 390.435 35.2097 395.566C39.0591 400.268 44.1597 403.475 50.5113 405.185C56.8629 406.468 63.1182 407.109 69.2774 407.109C79.286 407.109 87.7067 405.185 94.5395 401.337C101.468 397.49 106.184 390.221 108.686 379.533C111.188 368.845 112.439 351.316 112.439 326.947C112.439 296.164 110.803 276.711 107.531 268.588C104.356 260.038 98.9182 255.762 91.2193 255.762L69.133 254.48L43.2935 251.273C34.2473 251.273 27.2702 243.578 22.3621 228.186C17.454 212.795 15 186.716 15 149.948C15 120.875 16.0586 96.7198 18.1758 77.4809C20.293 57.8143 23.8538 43.9195 28.8581 35.7964C33.9586 27.2457 39.9252 21.9015 46.758 19.7639C53.5908 17.1987 61.2416 15.9161 69.7104 15.9161C76.7357 15.9161 81.7881 16.3436 84.8677 17.1987C88.0435 17.6262 93.144 19.5501 100.169 22.9704C107.291 25.9631 112.728 36.6514 116.481 55.0354C120.235 73.4193 122.111 101.423 122.111 139.046H110.418C110.418 119.807 109.889 105.484 108.831 96.0786C107.868 86.6728 106.425 80.0461 104.5 76.1983Z" fill="#bbaa92" />
        <path ref={setPathRef(12)} d="M1013.93 76.1983C1011.91 71.9229 1008.26 68.5027 1002.96 65.9375C997.671 62.9447 990.838 61.4483 982.465 61.4483H978.423C972.072 61.4483 965.48 62.731 958.647 65.2962C951.91 67.8614 947.002 72.1367 943.923 78.1222C940.843 84.1076 938.87 92.2308 938.004 102.492C937.138 112.752 936.705 125.151 936.705 139.687C936.705 165.766 938.293 183.509 941.469 192.915C944.741 202.321 949.456 207.023 955.615 207.023L966.153 208.306L988.817 207.665C992.763 207.665 996.275 207.878 999.355 208.306C1002.43 208.734 1007.05 210.444 1013.21 213.436C1019.47 216.429 1024.47 226.262 1028.23 242.936C1032.08 259.182 1034 287.186 1034 326.947C1034 353.026 1033.09 374.83 1031.26 392.359C1029.43 409.46 1026.3 422.5 1021.87 431.478C1017.54 440.029 1012.25 445.587 1006 448.152C999.836 450.717 993.099 452 985.786 452H978.135C970.917 452 965.48 451.572 961.823 450.717C958.262 450.29 952.728 447.938 945.222 443.663C937.812 439.388 932.519 428.272 929.343 410.316C926.167 391.932 924.579 360.08 924.579 314.762H936.272V323.74C936.272 345.544 936.705 361.79 937.571 372.479C938.533 382.74 940.891 390.435 944.644 395.566C948.494 400.268 953.594 403.475 959.946 405.185C966.298 406.468 972.553 407.109 978.712 407.109C988.721 407.109 997.141 405.185 1003.97 401.337C1010.9 397.49 1015.62 390.221 1018.12 379.533C1020.62 368.845 1021.87 351.316 1021.87 326.947C1021.87 296.164 1020.24 276.711 1016.97 268.588C1013.79 260.038 1008.35 255.762 1000.65 255.762L978.568 254.48L952.728 251.273C943.682 251.273 936.705 243.578 931.797 228.186C926.889 212.795 924.435 186.716 924.435 149.948C924.435 120.875 925.493 96.7198 927.61 77.4809C929.728 57.8143 933.289 43.9195 938.293 35.7964C943.393 27.2457 949.36 21.9015 956.193 19.7639C963.026 17.1987 970.676 15.9161 979.145 15.9161C986.171 15.9161 991.223 16.3436 994.302 17.1987C997.478 17.6262 1002.58 19.5501 1009.6 22.9704C1016.73 25.9631 1022.16 36.6514 1025.92 55.0354C1029.67 73.4193 1031.55 101.423 1031.55 139.046H1019.85C1019.85 119.807 1019.32 105.484 1018.27 96.0786C1017.3 86.6728 1015.86 80.0461 1013.93 76.1983Z" stroke="#BBAA92" stroke-width="30" mask="url(#path-1-outside-1_512_158)" />
        <path ref={setPathRef(13)} d="M833.058 19.8601H852.979L782.245 226.359L857.743 447.607H836.667L769.831 247.522H752.797V447.607H741.104V19.8601H752.797V204.555H769.831L833.058 19.8601Z" stroke="#BBAA92" stroke-width="30" mask="url(#path-1-outside-1_512_158)" />
        <path ref={setPathRef(14)} d="M648.573 148.152C648.573 186.63 647.274 213.137 644.675 227.673C642.173 241.782 636.64 251.615 628.075 257.173C634.522 261.021 639.238 268.075 642.221 278.336C645.301 288.169 646.841 306.339 646.841 332.847V448.922H635.292V354.009C635.292 322.372 633.753 301.423 630.673 291.162C627.69 280.901 622.445 275.771 614.938 275.771H549.257V448.922H537.564V21.1748H615.949C627.593 21.1748 635.918 29.9392 640.922 47.4681C646.023 64.5694 648.573 98.1308 648.573 148.152ZM636.447 144.946C636.447 111.598 634.667 90.0077 631.106 80.1744C627.545 69.9136 621.675 64.7832 613.495 64.7832H549.257V232.804H613.783C622.252 232.804 628.123 227.032 631.395 215.489C634.763 203.518 636.447 180.003 636.447 144.946Z" stroke="#BBAA92" stroke-width="30" mask="url(#path-1-outside-1_512_158)" />
        <path ref={setPathRef(15)} d="M373.721 448.868H360.008L416.884 21.1214H432.474L489.783 448.868H476.358L463.799 352.673H385.992L373.721 448.868ZM385.992 334.069H463.799L424.679 10L385.992 334.069Z" stroke="#BBAA92" stroke-width="30" mask="url(#path-1-outside-1_512_158)" />
        <path ref={setPathRef(16)} d="M202.806 448.868H191.113V21.1214H202.806V206.457H292.594V21.1214H304.143V448.868H292.594V249.424H202.806V448.868Z" stroke="#BBAA92" stroke-width="30" mask="url(#path-1-outside-1_512_158)" />
        <path ref={setPathRef(17)} d="M104.5 76.1983C102.479 71.9229 98.822 68.5027 93.529 65.9375C88.236 62.9447 81.4032 61.4483 73.0306 61.4483H68.9887C62.6371 61.4483 56.0449 62.731 49.2121 65.2962C42.4755 67.8614 37.5675 72.1367 34.4879 78.1222C31.4083 84.1076 29.4355 92.2308 28.5693 102.492C27.7032 112.752 27.2702 125.151 27.2702 139.687C27.2702 165.766 28.8581 183.509 32.0339 192.915C35.3059 202.321 40.0215 207.023 46.1806 207.023L56.7185 208.306L79.3822 207.665C83.3279 207.665 86.8405 207.878 89.9201 208.306C92.9997 208.734 97.619 210.444 103.778 213.436C110.034 216.429 115.038 226.262 118.791 242.936C122.641 259.182 124.565 287.186 124.565 326.947C124.565 353.026 123.651 374.83 121.823 392.359C119.994 409.46 116.866 422.5 112.439 431.478C108.109 440.029 102.816 445.587 96.5604 448.152C90.4013 450.717 83.6647 452 76.3508 452H68.7C61.4822 452 56.0449 451.572 52.3879 450.717C48.8271 450.29 43.2935 447.938 35.7871 443.663C28.3769 439.388 23.0839 428.272 19.9081 410.316C16.7323 391.932 15.1444 360.08 15.1444 314.762H26.8371V323.74C26.8371 345.544 27.2702 361.79 28.1363 372.479C29.0986 382.74 31.4564 390.435 35.2097 395.566C39.0591 400.268 44.1597 403.475 50.5113 405.185C56.8629 406.468 63.1182 407.109 69.2774 407.109C79.286 407.109 87.7067 405.185 94.5395 401.337C101.468 397.49 106.184 390.221 108.686 379.533C111.188 368.845 112.439 351.316 112.439 326.947C112.439 296.164 110.803 276.711 107.531 268.588C104.356 260.038 98.9182 255.762 91.2193 255.762L69.133 254.48L43.2935 251.273C34.2473 251.273 27.2702 243.578 22.3621 228.186C17.454 212.795 15 186.716 15 149.948C15 120.875 16.0586 96.7198 18.1758 77.4809C20.293 57.8143 23.8538 43.9195 28.8581 35.7964C33.9586 27.2457 39.9252 21.9015 46.758 19.7639C53.5908 17.1987 61.2416 15.9161 69.7104 15.9161C76.7357 15.9161 81.7881 16.3436 84.8677 17.1987C88.0435 17.6262 93.144 19.5501 100.169 22.9704C107.291 25.9631 112.728 36.6514 116.481 55.0354C120.235 73.4193 122.111 101.423 122.111 139.046H110.418C110.418 119.807 109.889 105.484 108.831 96.0786C107.868 86.6728 106.425 80.0461 104.5 76.1983Z" stroke="#BBAA92" stroke-width="30" mask="url(#path-1-outside-1_512_158)" />
      </svg>
    </div>
  )
}

export default Introduce
